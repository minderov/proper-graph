(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Edge=function(){function Edge(from,to){_classCallCheck(this,Edge);this.from=from;this.to=to}_createClass(Edge,[{key:"hash",get:function get(){return this.from+this.to}}]);return Edge}();module.exports=Edge},{}],2:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Edge=require("./edge.js");var Edges=function(){function Edges(params){_classCallCheck(this,Edges);this.directed=params.directed;this.edges={}}_createClass(Edges,[{key:"add",value:function add(fromVal,toVal){var edge=new Edge(fromVal,toVal);if(!this.edges[edge.hash]){this.edges[edge.hash]=[]}this.edges[edge.hash].push(edge)}},{key:"getPossibleHashes",value:function getPossibleHashes(fromVal,toVal){var possibleHashes=[{hash:new Edge(fromVal,toVal).hash,from:fromVal,to:toVal}];if(!this.directed){possibleHashes.push({hash:new Edge(toVal,fromVal).hash,from:toVal,to:fromVal})}return possibleHashes}},{key:"remove",value:function remove(fromVal,toVal){var found=false;var possibleHashes=this.getPossibleHashes(fromVal,toVal);for(var i=0;i<possibleHashes.length;i++){var hash=possibleHashes[i].hash;var from=possibleHashes[i].from;var to=possibleHashes[i].to;if(!this.edges[hash]){continue}for(var k=0;k<this.edges[hash].length;k++){var edge=this.edges[hash][k];if(edge.from===from&&edge.to===to){found=true;this.edges[hash].splice(k,1)}}}return found}},{key:"contains",value:function contains(fromVal,toVal){var possibleHashes=this.getPossibleHashes(fromVal,toVal);for(var i=0;i<possibleHashes.length;i++){var hash=possibleHashes[i].hash;var from=possibleHashes[i].from;var to=possibleHashes[i].to;if(!this.edges[hash]){continue}for(var k=0;k<this.edges[hash].length;k++){var edge=this.edges[hash][k];if(edge.from===from&&edge.to===to){return true}}}return false}}]);return Edges}();module.exports=Edges},{"./edge.js":1}],3:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Node=require("./node.js");var Edge=require("./edge.js");var Edges=require("./edges.js");var Graph=function(){function Graph(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$directed=_ref.directed,directed=_ref$directed===void 0?false:_ref$directed;_classCallCheck(this,Graph);this.directed=directed;this.edges=new Edges({directed:this.directed});this.nodes=new Map;this.shortestPaths={}}_createClass(Graph,[{key:"addEdge",value:function addEdge(fromVal,toVal){var from=this.nodes.get(fromVal);var to=this.nodes.get(toVal);this.edges.add(fromVal,toVal);from.addEdgeTo(to);to.addEdgeFrom(from);if(!this.directed){to.addEdgeTo(from);from.addEdgeFrom(to)}}},{key:"removeEdge",value:function removeEdge(fromVal,toVal){return this.edges.remove(fromVal,toVal)}},{key:"removeNode",value:function removeNode(value){if(!this.contains(value)){return false}var node=this.nodes.get(value);var adjacentNodes=node.adjacentNodes();for(var i=0;i<adjacentNodes.length;i++){this.removeEdge(adjacentNodes[i].value,node.value);if(this.directed){this.removeEdge(node.value,adjacentNodes[i].value)}}this.nodes.delete(value);return true}},{key:"addNode",value:function addNode(value){this.nodes.set(value,new Node(value))}},{key:"incomingNodes",value:function incomingNodes(value){return this.nodes.get(value).incomingNodes().map(function(n){return n.value})}},{key:"outgoingNodes",value:function outgoingNodes(value){return this.nodes.get(value).outgoingNodes().map(function(n){return n.value})}},{key:"contains",value:function contains(value){return this.nodes.has(value)}},{key:"containsEdge",value:function containsEdge(fromVal,toVal){return this.edges.contains(fromVal,toVal)}},{key:"getNodeByValue",value:function getNodeByValue(value){return this.nodes.get(value)}},{key:"areConnected",value:function areConnected(fromVal,toVal){var directedPathExists=this.shortestPath(fromVal,toVal).length!==undefined;if(!directedPathExists&&this.directed){var reverseDirectedPathExists=this.shortestPath(toVal,fromVal).length!==undefined;return reverseDirectedPathExists}return directedPathExists}},{key:"BFS",value:regeneratorRuntime.mark(function BFS(fromVal){var from,visitedNodes,queue,_loop,_ret;return regeneratorRuntime.wrap(function BFS$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:from=this.nodes.get(fromVal);visitedNodes={};queue=[from];_loop=regeneratorRuntime.mark(function _loop(){var node,outgoingNodes;return regeneratorRuntime.wrap(function _loop$(_context){while(1){switch(_context.prev=_context.next){case 0:node=queue.shift();if(!visitedNodes[node.value]){_context.next=3;break}return _context.abrupt("return","continue");case 3:visitedNodes[node.value]=true;_context.next=6;return node;case 6:outgoingNodes=node.outgoingNodes();outgoingNodes.map(function(n){return n.parent=node});queue=queue.concat(outgoingNodes);case 9:case"end":return _context.stop()}}},_loop,this)});case 4:if(!(queue.length>0)){_context2.next=11;break}return _context2.delegateYield(_loop(),"t0",6);case 6:_ret=_context2.t0;if(!(_ret==="continue")){_context2.next=9;break}return _context2.abrupt("continue",4);case 9:_context2.next=4;break;case 11:case"end":return _context2.stop()}}},BFS,this)})},{key:"shortestPath",value:function shortestPath(fromVal,toVal){var from=this.nodes.get(fromVal);var pathTo={};pathTo[from.value]=[from.value];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.BFS(from.value)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var node=_step.value;var pathToNode=node.parent?pathTo[node.parent.value]:[];pathTo[node.value]=pathToNode.concat(node.value);if(node.value===toVal){return{nodes:pathTo[node.value],length:pathTo[node.value].length-1}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return{nodes:[],length:undefined}}}]);return Graph}();module.exports=Graph},{"./edge.js":1,"./edges.js":2,"./node.js":4}],4:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Node=function(){function Node(value){_classCallCheck(this,Node);this.val=value;this.edgesTo=[];this.edgesFrom=[]}_createClass(Node,[{key:"addEdgeFrom",value:function addEdgeFrom(from){this.edgesFrom.push(from)}},{key:"addEdgeTo",value:function addEdgeTo(to){this.edgesTo.push(to)}},{key:"incomingNodes",value:function incomingNodes(){return this.edgesFrom.map(function(n){return n.deepCopy()})}},{key:"outgoingNodes",value:function outgoingNodes(){return this.edgesTo.map(function(n){return n.deepCopy()})}},{key:"adjacentNodes",value:function adjacentNodes(){var adjacentNodesWithDuplicates=this.edgesTo.concat(this.edgesFrom);var uniqueAdjacentNodes=Array.from(new Set(adjacentNodesWithDuplicates));return uniqueAdjacentNodes.map(function(n){return n.deepCopy()})}},{key:"deepCopy",value:function deepCopy(){var newNode=new Node(this.val);for(var i=0;i<this.edgesTo.length;i++){newNode.addEdgeTo(this.edgesTo[i])}return newNode}},{key:"value",get:function get(){return this.val}}]);return Node}();module.exports=Node},{}]},{},[3]);
